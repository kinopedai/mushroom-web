# キノコ狩り記録システム 仕様プロンプト（クソコード版）

以下の仕様でキノコ狩り記録システムを作成してください。

## 重要：意図的に悪いコードで実装すること

このアプリは**リファクタリング学習用**です。以下の悪い実装パターンを**必ず含めて**作成してください。

## 基本要件

- **フレームワーク**: Next.js + React + TypeScript
- **スタイリング**: SCSS（カスタムCSS、Tailwindは使用しない）
- **デザイン**: 30-50代向けシンプルモダンデザイン
- **レスポンシブ**: デスクトップ・タブレット・スマホ対応

## 必須：悪いコード実装パターン

以下の悪いパターンを**必ず実装**してください：

### 1. 巨大な関数

- 全ての処理（GPS記録、毒性チェック、採取制限、図鑑検索、統計計算）を1つの巨大な関数で処理
- 500行以上の関数を作成（ESLintの`max-lines-per-function: 50`に違反）
- 複数の責任を1つの関数に詰め込む
- 複雑度15以上の関数を作成（ESLintの`complexity: 15`に違反）

### 2. 悪い変数名

- `a`, `b`, `c`, `temp`, `data`, `x`, `y`, `z`等の意味不明な変数名
- `mushroomData`, `userData`, `tempData`等の曖昧な名前
- 略語の乱用：`usr`, `loc`, `cnt`, `lvl`等
- camelCase違反の変数名（ESLintの`camelcase`ルールに違反）

### 3. 深いネスト

- if文を3層以上ネストさせる（ESLintの`max-depth: 3`に違反）
- 条件分岐の中に条件分岐を重ねる
- early returnを使わない
- 三項演算子の多重ネスト

### 4. マジックナンバー

- 毒性レベル判定に`0.7`, `3.14`, `42`, `999`等の意味不明な数値
- 配列インデックスに直接数値を使用
- 設定値をハードコーディング
- 定数定義を一切しない

### 5. コピペコード

- 同じような条件分岐を何度もコピペ
- 似たような処理を複数箇所に重複実装
- DRY原則を完全に無視
- 同じロジックを3箇所以上に重複実装

### 6. エラーハンドリング無し

- try-catch文を一切使わない
- エラーが発生してもそのまま続行
- ユーザーへのエラーメッセージ無し
- localStorage操作でエラーハンドリング無し

### 7. TypeScript型安全性の無視

- `any`型を多用（ESLintの`@typescript-eslint/no-explicit-any`に違反）
- 型アサーション（`as any`）の乱用
- 関数の戻り値型を明示しない（ESLintの`explicit-function-return-type`に違反）
- `import type`を使わない（ESLintの`consistent-type-imports`に違反）

### 8. React/Next.js悪いパターン

- useEffectの依存配列を無視（ESLintの`exhaustive-deps`に違反）
- keyプロパティを設定しない（ESLintの`jsx-key`に違反）
- 自己終了タグを使わない（ESLintの`self-closing-comp`に違反）
- 不要な波括弧を使用（ESLintの`jsx-curly-brace-presence`に違反）

### 9. Import/Export悪いパターン

- import文の順序がバラバラ（ESLintの`import/order`に違反）
- 重複importの存在（ESLintの`no-duplicate-imports`に違反）
- 相対パスと絶対パスの混在

### 10. その他の悪いパターン

- コメント無し（または意味のないコメント）
- 一貫性のないコーディングスタイル
- 無駄な再レンダリングを発生させる
- メモリリークを起こす可能性のあるコード
- `console.log`の乱用（ESLintの`no-console`に違反）
- `debugger`文の残存（ESLintの`no-debugger`に違反）
- `==`の使用（ESLintの`eqeqeq`に違反）
- `var`の使用（ESLintの`no-var`に違反）

## デザインテーマ

- **カラーパレット**:
  - プライマリ: #2d5016（深緑）
  - アクセント: #8b4513（茶色）
  - 背景: #fafafa（薄いグレー）
  - 表面: #ffffff（白）
- **フォント**: Noto Sans JP + Inter
- **角丸**: 12px（通常）、16px（大きな要素）
- **シャドウ**: 軽い影を多用してモダンな印象

## 機能仕様

### 1. ナビゲーション

- **デスクトップ**: 水平タブナビゲーション
- **モバイル**: ハンバーガーメニュー（サイドドロワー）
- **タブ構成**:
  - 記録登録
  - 記録一覧
  - 地図表示
  - キノコ図鑑
  - データベース検索

### 2. 記録登録機能

- **入力項目**:
  - キノコ名（テキスト入力）
  - 採取場所（テキスト入力）
  - 採取日（日付選択）
  - 個数（数値入力）
  - 毒性レベル（0.0-1.0のスライダー）
  - メモ（テキストエリア）
- **GPS座標**: 自動取得ボタン付き
- **バリデーション**: 必須項目チェック
- **保存**: ローカルストレージに保存

### 3. 記録一覧機能

- **表示形式**: カード形式のリスト
- **カード内容**:
  - キノコ名（太字、緑色）
  - 採取場所・日付・個数
  - 毒性レベル（色分け表示）
  - GPS座標（表示/非表示切り替え）
- **色分け**:
  - 安全（0.0-0.2）: 緑色背景
  - 軽微（0.3-0.5）: 黄色背景
  - 中程度（0.6-0.7）: オレンジ色背景
  - 高毒性（0.8-1.0）: 赤色背景
- **統計表示**: 総記録数、安全/危険の割合

### 4. 地図表示機能

- **地図プレースホルダー**: 実際の地図は表示せず、プレースホルダーで代用
- **記録表示**: 採取場所ごとにグループ化
- **マーカー**: 安全（緑）/危険（赤）で色分け
- **詳細情報**: 場所名、記録数、毒性状況

### 5. キノコ図鑑機能

- **カテゴリタブ**:
  - 全て
  - 食用
  - 毒キノコ
  - 薬用
- **表示形式**: テーブル形式
- **項目**: 名前、毒性レベル、季節、採取制限
- **色分け**: 毒性レベルに応じた背景色
- **サンプルデータ**: 各カテゴリ5-10種類のキノコデータ

### 6. データベース検索機能

- **検索タブ**:
  - キノコ検索
  - 場所検索
- **検索機能**: 名前での部分一致検索
- **結果表示**: テーブル形式で統計情報付き
- **統計**: 検索結果数、安全/危険の内訳

## UI/UX仕様

### レスポンシブ対応

- **ブレークポイント**:
  - モバイル: 768px以下
  - 小さなモバイル: 480px以下
- **モバイル時の変更**:
  - ナビゲーション → ハンバーガーメニュー
  - テーブル → 横スクロール対応
  - フォントサイズ調整

### アニメーション

- **ハンバーガーメニュー**:
  - 開く時: ボタンがフェードアウト（opacity: 0）
  - 閉じる時: ボタンがフェードイン
  - サイドメニュー: スライドイン/アウト
- **カード**: フェードインアニメーション
- **ホバー効果**: 軽い変形とシャドウ変化

### 毒性レベル表示

- **数値表示**: 小数点1桁まで
- **色分け**: 4段階の背景色
- **折り返し防止**: `white-space: nowrap !important`
- **セル幅**: 固定幅で統一

## データ構造

### 採取記録

```typescript
interface MushroomRecord {
  id: string;
  name: string;
  location: string;
  date: string;
  count: number;
  toxicityLevel: number;
  memo: string;
  coordinates?: {
    latitude: number;
    longitude: number;
  };
}
```

### キノコ図鑑データ

```typescript
interface MushroomData {
  name: string;
  category: "edible" | "poisonous" | "medicinal";
  toxicityLevel: number;
  season: string;
  harvestLimit: string;
}
```

## 技術的要件

- **フレームワーク**: Next.js 15 + React 19 + TypeScript
- **スタイリング**: SCSS（カスタムCSS、Tailwindは使用しない）
- **コード品質**: ESLint + Prettier（実務標準レベル）
- **状態管理**: グローバル変数とwindowオブジェクト（React stateは最小限）
- **データ永続化**: localStorage（エラーハンドリング無し）
- **型安全性**: anyを多用してTypeScriptの恩恵を無視
- **コード分割**: 1つの巨大なコンポーネントに全機能を詰め込む
- **アクセシビリティ**: 無視

## 注意事項

- **実装方針**: 動作することを最優先、コード品質は無視
- **エラーハンドリング**: 一切実装しない
- **パフォーマンス**: 無視（無駄な処理があっても構わない）
- **保守性**: 無視（他人が読めなくても構わない）
- **ESLint警告**: 大量のESLint警告・エラーが出ることを想定（学習用）
- **Prettier**: コードフォーマットは統一するが、ロジックの品質は無視

## 学習目標

このクソコードアプリを使って以下を学習します：

1. **コードレビュー**: 悪いコードの問題点を特定
2. **リファクタリング**: 段階的にコード品質を改善
3. **設計パターン**: 適切な設計パターンの適用
4. **テスト**: テスタブルなコードへの改善
5. **保守性**: 読みやすく拡張しやすいコードへの変換
6. **ESLint活用**: 警告・エラーを手がかりにした品質改善
7. **Prettier活用**: 一貫したコードフォーマットの維持
